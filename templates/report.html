{% extends "layout.html" %}

{% block title %}Clinical Report - Lung Nodule Detection{% endblock %}

{% block content %}
<h2>Clinical Report</h2>

<div style="background: #f8f9fa; padding: 20px; border-radius: 5px; margin: 20px 0;">
    <h3>Patient Information</h3>
    <p><strong>Name:</strong> {{ user_name }}</p>
    <p><strong>Scan ID:</strong> {{ scan_id }}</p>
    <p><strong>Report Date:</strong> {{ report_date }}</p>
</div>

<div style="background: #e7f3ff; padding: 20px; border-radius: 5px; margin: 20px 0;">
    <h3>Detection Results</h3>
    <p><strong>Confidence Score:</strong> {{ "%.2f"|format(confidence_score * 100) }}%</p>
    <p><strong>Number of Detections:</strong> {{ num_detections }}</p>
    <p><strong>Average Diameter:</strong> {{ avg_diameter }} mm</p>
</div>

{% if image_fname %}
<div style="margin: 20px 0;">
    <h3>Annotated Image:</h3>
    <img src="{{ url_for('serve_prediction', fname=image_fname) }}" alt="Analysis Result" style="max-width: 100%; border: 2px solid #667eea; border-radius: 5px;">
</div>
{% endif %}

<div style="background: #fff3cd; padding: 20px; border-radius: 5px; margin: 20px 0;">
    <h3>Important Notice</h3>
    <p>This report is generated by an AI system and is intended for clinical decision support only. It should not replace professional medical judgment or clinical evaluation.</p>
</div>

<div style="margin-top: 30px;">
    <a href="{{ url_for('download_report') }}" class="btn">Download Report (TXT)</a>
    <a href="{{ url_for('download_report_pdf') }}" class="btn btn-secondary">Download Report (PDF)</a>
    <a href="{{ url_for('index') }}" class="btn btn-secondary">Back to Home</a>
</div>
{% endblock %}
